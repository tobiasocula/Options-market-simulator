{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#hawkes-self-exciting-process","title":"Hawkes self-exciting process","text":"<p>We will use a variant of the standard Hawkes process formula described on the wiki.</p> \\[\\begin{equation} \\begin{aligned} \\lambda_i(t)=\\mu+\\alpha_M\\cdot\\text{log}(K/S)^2+\\alpha_t\\cdot\\Delta t +\\sum_{T\\in\\text{Trades}}\\text{exp}(\\text{log}(w\\cdot\\text{Vol})) \\end{aligned} \\end{equation}\\] <p>in which \\(\\lambda_i(t)\\) is the intensity of event (in this case, contract) \\(i\\) at time \\(t\\), and \\(\\mu\\) is the baseline intensity. The second term is the impact on being ITM or OTM and time decay, and the third iterates for all previous trades that occured for this contract by accounting for their volumes (higher volumes means more intensity). \\(\\alpha_M\\), \\(\\alpha_t\\) and \\(w\\) are parameters.</p> <p>We of course also have to account for overall time decay, thus we also multiply by a factor:</p> <p>\\(\\lambda_i(t+\\Delta t)=\\lambda_i(t)\\cdot\\text{exp}(\\beta\\cdot\\Delta t)\\)</p> <p>We then compute the total intensity (accross all contracts):</p> <p>\\(\\Lambda(t)=\\sum_{i}\\lambda_i(t)\\)</p> <p>and then sample an amount of orders to generate by a Poisson process, with parameter \\(\\Lambda(t)\\cdot\\text{dt}\\). This is the so-called discrete version of a Hawkes process..</p> <p>The clear difference with cross-excitation models is that here we don't account for impact of other contract's orders, which is a modelling choice that simplifies the simulation.</p>"},{"location":"#order-volume","title":"Order volume","text":"<p>We use the formula</p> <p>\\(\\text{Vol}=\\text{Lognormal}(\\mu,\\sigma)\\cdot\\text{VolumeBase}\\cdot\\text{exp}(-\\gamma\\text{log}(K/S)-\\beta\\Delta t)\\)</p> <p>Here, \\(\\mu\\) and \\(\\sigma\\) determine the \"randomness\" of the order volume generation and the exponential factor determines the impact of moneyness and time decay, with \\(\\beta\\) being the time decay parameter, \\(\\gamma\\) the moneyness parameter, \\(\\text{log}(K/S)\\) the moneyness and \\(\\Delta t\\) the time till expiry in years.</p>"},{"location":"#buy-and-limit-order-probability-distributions","title":"Buy and limit order probability distributions","text":"<p>For determining whether an order will be a buy or sell or a limit or not, we use a generalized linear model with the classic logistic function:</p> <p>\\(p_{buy}=1/(1+\\text{exp}(-\\eta_{buy}))\\)</p> <p>and similarly for the limit order probability.</p> <p>We determine the coefficients \\(\\eta_{buy}\\) and \\(\\eta_{limit}\\) by using simple linear regression:</p> <p>\\(\\eta_{buy}=\\beta_0+\\beta_1\\cdot\\text{Imbalance}\\)</p> <p>\\(\\eta_{limit}=\\alpha_0+\\alpha_1\\cdot\\text{Volume}+\\alpha_2\\cdot\\text{Imbalance}\\)</p> <p>Here, the buy probability depends only on the base rate and the volume imbalance of the current orderbook (higher imbalance towards buy side promotes more buy orders), and the limit probatility depends on the base rate, volume imbalance (more imbalance means higher amount of limit orders), and the volume of the trade (higher volume means more likely to be a market order, since large trades tend to be market orders).</p>"},{"location":"#analysis","title":"Analysis","text":"<p>I've then built a simple Streamlit application to make graphs and such of all the data generated by the simulation.</p>"},{"location":"application/","title":"Application","text":"<p>To run the application, simply run</p> <pre><code>streamlit run Overview.py\n</code></pre> <p>in the terminal. To run the simulation itself with custom parameters, run the <code>run_once.py</code> function. The parameters for one run are stored in <code>params_for_self_excitation.py</code>.</p>"}]}